{"version":3,"sources":["assets\\Script\\GameMain.js"],"names":["Utils","require","ShareSdk","RankList","cc","Class","Component","properties","m_n_gamenode","Node","m_n_bg_panel","m_pre_blockbg","Prefab","m_pre_light","m_pre_boomeffect","m_pre_boom","m_l_boomnum","Label","m_l_score","m_sp_monster","Sprite","m_l_level","m_n_result_panel","m_btn_tool2","m_n_guidemask","m_n_tooluse","m_n_showtime","type","m_spf_gold","SpriteFrame","m_n_askpanel","m_n_boss","m_spriteAtlas","SpriteAtlas","m_n_bglist","m_l_gold","m_pre_rock","m_n_kuai","m_n_displaycheck","m_n_displayrank","m_n_stepview","m_n_reliveview","m_n_video","m_n_lookvideo","m_n_luckyvideo","m_n_doublevideo","m_n_doublescore","m_n_sharegift","m_n_skinpanel","m_n_guidenode","m_l_asktype","m_n_guidefiger","onLoad","window","GAME_CONTROL","setDesignResolution","onDestroy","m_block_pool","clear","m_light_pool","m_bannerad","destroy","EVENT_LISTENER","off","GAME_UPDATE_DATA","GAME_SAVE_HANDLER","start","firstGame","createMap","initData","initMonster","m_cur_level","showAdBanner","node","on","EventType","TOUCH_END","touchEnd","updateGold","updateSkin","getComponent","active","m_gamestate","m_cur_score","INIT_GAME_SAVE_DATA","top_level","m_normal_talktime","m_normal_curtime","m_target_block","m_mapblink","m_touch_boom","_relivenum","_videonum","_killnum","string","m_doublescore","gold_num","_isdeleting","_isbless","NodePool","updateToolsNum","schedule","runAction","sequence","repeat","rotateTo","delayTime","_configlist","getTheConfig","checkWillSurpass","rand","random","scale","scaleTo","easing","easeIn","SKIN_SHARE","find","y","scheduleOnce","showAdb","hideGuide","stopAllActions","GUIDE_LEVEL","sys","localStorage","setItem","showGuide","_tempguide","typeindex","indexlist","skin","i","length","data","SKIN_CONFIG","position","repeatForever","callFunc","moveTo","x","index","getCurColorIndex","blockindex","colorIndex","colorName","name","sprite","addComponent","console","log","spriteFrame","getSpriteFrame","Vec2","ZERO","parent","m_maparray","isHaveFK","onKeepGoing","event","vec","touch","getLocation","convertToNodeSpace","backIndexofList","instantiate","tool","doBoomAction","setMapBlink","shapeitem","checkIsLose","opacity","pos","FKNode","getChildByName","spawn","fadeOut","removeSelf","zIndex","Animation","play","SetSoundEffect","BOOM_EFFECT","list","getBoomIndexList","count","actionAry","push","oneList","j","xIndex","arguments","score","getAddScoreCal","showHurtText","updateScore","attackMonster","action","boomrange","bombFinish","getCanDropBlocks","canDroplsit","k","frameNode","srcPos","v2","children","len","childPos","add","s","tFrameNode","dis","sub","mag","arr","getRandomSDiff","INDEX_TO_POINT","m_boomnum","setAddVisible","data_index","updateIndex","num","addbtn","top_score","setScore","frameList","FKIndex","level","self","lv","MAP_CONFIG","initType","mon_id","mon_hp","playStartTalk","offset","deltaTime","easeBackIn","fadeTo","moveBy","addScore","XCCount","isDropAdd","addScoreCount","script","setNextBlock","judgeGame","checkClearUp","haveFKIndexList","sort","a","b","xcList","DISLIST","oneXCList","intersectAry","get2AryIntersect","isXC","check2AryIsEqual","clearnum","GET_GOLD","handlerShowTime","ary1","ary2","SAY_3","setTimeout","addGold","gold","spos","epos","this$1","spritefram","moveIcon","showBox","callback","showStep","loadRes","obj","showView","hurt","realhurt","blocknode","get","angle","getAngle","rotation","resetSytem","put","monsterbeHit","destroyBlockByHitMonster","blockBeHit","BE_HIT","Color","hp","reduceHp","m_solidernum","m_cur_attack_num","playAngry","playBeHit","onOpenSkinPanel","onCancelVideo","showFail","CHALLENG_FAIL_MUSIC","onAdBtnClick","custom","wx","firstvideo","videoReward","VersionToast","showToast","title","icon","image","duration","hideToast","info","getSystemInfoSync","SDKVersion","showAd","m_videoAd","createRewardedVideoAd","adUnitId","onError","err","load","then","show","onClose","status","offClose","isEnded","undefined","showTipsText","BLACK","resetBlock","m_in_judge","boo","time","playDead","CHALLENG_VICTORY_MUSIC","onNextLevel","playMonsterVictory","BoxReward","onVideoClose","onReliveBtnClick","showReliveAd","onReliveGameVideo","m_videoAd2","onBackToMenu","BUTTON_CLICK_MUSIC","director","loadScene","MENU_SCENE_NAME","onBoomClick","initToolInfo","TOOL_CONFIG","onStrongClick","m_strongnum","guideMaskClick","onUseStrong","t","m_row","m_col","m_grid_array","addStrong","setTag","stopActionByTag","getTargetGridInfo","target","Math","floor","forEach","element","onReliveGame","shareAppMessage","imageUrl","tempFileURL","success","res","fail","complate","msg","Size","winSize","Widthnode","convertToWorldSpace","height","width","system","adaptScaleH","screenHeight","PosY","createBannerAd","style","left","top","screenWidth","onResize","res1","error","onOpenAskPanel","onCloseAskPanel","update","dt","playNormal"],"mappings":"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","sourceRoot":"/","sourcesContent":["let Utils = require(\"Utils\");\nlet ShareSdk = require(\"ShareSdk\");\nlet RankList = require(\"RankList\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        m_n_gamenode: cc.Node,\n        m_n_bg_panel: cc.Node,\n        m_pre_blockbg: cc.Prefab,\n        m_pre_light: cc.Prefab,\n        m_pre_boomeffect: cc.Prefab,\n        m_pre_boom: cc.Prefab,\n        m_l_boomnum: cc.Label,\n        m_l_score: cc.Label,\n        m_sp_monster: cc.Sprite,\n        m_l_level: cc.Label,\n        m_n_result_panel: cc.Node,\n        m_btn_tool2: cc.Node,\n        m_n_guidemask: cc.Node,\n        m_n_tooluse: cc.Node,\n        m_n_showtime: {\n            type: cc.Node,\n            default: []\n        },\n        m_spf_gold: cc.SpriteFrame,\n        m_n_askpanel: cc.Node,\n        m_n_boss: cc.Node,\n        m_spriteAtlas: cc.SpriteAtlas,\n        m_n_bglist: cc.Node,\n        m_l_gold: cc.Label,\n        m_pre_rock: cc.Prefab,\n        m_n_kuai: {\n            type: cc.Node,\n            default: []\n        },\n        m_n_displaycheck: cc.Node,\n        m_n_displayrank: cc.Node,\n        m_n_stepview: cc.Node,\n        m_n_reliveview: cc.Node,\n        m_n_video: cc.Node,\n        m_n_lookvideo: cc.Node,\n        m_n_luckyvideo: cc.Node,\n        m_n_doublevideo: cc.Node,\n        m_n_doublescore: cc.Node,\n        m_n_sharegift: cc.Node,\n        m_n_skinpanel: cc.Node,\n        m_n_guidenode: cc.Node,\n        m_l_asktype: cc.Label,\n        m_n_guidefiger: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        window.GAME_CONTROL = this;\n        Utils.setDesignResolution();\n    },\n\n    onDestroy() {\n        this.m_block_pool.clear();\n        this.m_light_pool.clear();\n        window.GAME_CONTROL = null;\n        if (this.m_bannerad) {\n            this.m_bannerad.destroy();\n            this.m_bannerad = null;\n        }\n        EVENT_LISTENER.off(window.GAME_UPDATE_DATA, this);\n        EVENT_LISTENER.off(window.GAME_SAVE_HANDLER, this);\n    },\n\n    start() {\n        if (window.firstGame)\n            window.firstGame = false;\n        this.createMap();\n        this.initData();\n        this.initMonster(this.m_cur_level);\n        this.showAdBanner(false);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\n        EVENT_LISTENER.on(window.GAME_UPDATE_DATA, this.updateGold, this);\n        EVENT_LISTENER.on(window.GAME_SAVE_HANDLER, this.updateSkin, this);\n    },\n\n    initData() {\n        this.m_n_skinpanel.getComponent(\"SkinPanel\").initData();\n        this.m_n_displaycheck.active = true;\n        this.m_n_displayrank.active = false;\n        this.m_n_lookvideo.active = false;\n        this.m_n_doublescore.active = false;\n        this.m_gamestate = 0;\n        this.m_cur_score = 0;\n        this.m_cur_level = window.INIT_GAME_SAVE_DATA.top_level + 1;\n        this.m_normal_talktime = 4; //怪物说话间隔\n        this.m_normal_curtime = -1;\n        this.m_target_block = [];\n        this.m_mapblink = false;\n        this.m_touch_boom = false;\n        this._relivenum = 0;\n        this._videonum = 0;\n        this._killnum = 0;\n        this.m_l_score.string = this.m_cur_score;\n        this.m_doublescore = 1;\n        // this.m_l_solidernum.string = \"X\" + this.m_solidernum;\n        this.m_l_level.string = \"LV.\" + this.m_cur_level;\n        this.m_l_gold.string = window.INIT_GAME_SAVE_DATA.gold_num;\n        this._isdeleting = false //判断是否正在消除的依据\n        this._isbless = false; //是否已经恩赐过\n        this.m_block_pool = new cc.NodePool();\n        this.m_light_pool = new cc.NodePool();\n        this.updateToolsNum();\n        this.schedule(function () {\n            this.m_btn_tool2.runAction(cc.sequence(cc.repeat(cc.sequence(cc.rotateTo(0.1, -10), cc.rotateTo(0.1, 10)), 3), cc.rotateTo(0.1, 0)));\n            this.m_n_video.runAction(cc.sequence(cc.delayTime(1.0), cc.repeat(cc.sequence(cc.rotateTo(0.1, -10), cc.rotateTo(0.1, 10)), 3), cc.rotateTo(0.1, 0)));\n            this.m_n_doublevideo.runAction(cc.sequence(cc.delayTime(2.0), cc.repeat(cc.sequence(cc.rotateTo(0.1, -10), cc.rotateTo(0.1, 10)), 3), cc.rotateTo(0.1, 0)))\n        }, 5);\n        this._configlist = this.m_n_kuai[0].getComponent(\"ShapeItem\").getTheConfig();\n        RankList.checkWillSurpass(this.m_cur_score);\n\n        let rand = Utils.random(0, 1000);\n\n        this.m_n_luckyvideo.active = rand <= 500 && this.m_cur_level > 1;\n        if (this.m_n_luckyvideo.active) {//第一关不出现\n            this.m_n_luckyvideo.scale = 0;\n            this.m_n_luckyvideo.runAction(cc.sequence(cc.scaleTo(0.2, 1.2, 1.2).easing(cc.easeIn(3.0)), cc.scaleTo(0.1, 1, 1)));\n            if (window.SKIN_SHARE) {\n                let node = cc.find(\"btn_cancel\", this.m_n_luckyvideo);\n                node.y = -570;\n                this.scheduleOnce(() => {\n                    node.y = -514;\n                    if (this.m_n_luckyvideo.active && !this.showAdb)\n                        this.showAdBanner(true);\n                }, 1.8)\n            }\n        }\n    },\n\n    hideGuide() {\n        if (this.m_cur_level == 1) {\n            this.m_n_guidenode.active = false;\n            this.m_n_guidefiger.stopAllActions();\n            this.m_n_guidefiger.active = false;\n            window.GUIDE_LEVEL = 1;\n            cc.sys.localStorage.setItem('guideinfo', '1');\n        }\n    },\n\n    showGuide() {\n        if (!this._tempguide) {\n            this._tempguide = true;\n        } else { return; }\n        let typeindex = 0;\n        let indexlist = window.INIT_GAME_SAVE_DATA.skin;\n        for (let i = 0; i < indexlist.length; i++) {\n            if (indexlist[i] >= 2) {\n                typeindex = i;\n                break;\n            }\n        }\n\n        let data = window.SKIN_CONFIG[typeindex];\n        this.m_n_guidenode.active = true;\n        this.m_n_guidefiger.active = true;\n        this.m_n_guidefiger.position = this.m_n_kuai[1].position;\n        this.m_n_guidefiger.runAction(cc.repeatForever(cc.sequence(cc.callFunc(() => {\n            this.m_n_guidefiger.position = this.m_n_kuai[1].position;\n        }), cc.moveTo(1.0, this.m_n_kuai[1].x, this.m_n_kuai[1].y + 350))));\n        let index = this.m_n_kuai[0].getComponent(\"ShapeItem\").getCurColorIndex();\n        let blockindex = [];\n        blockindex[46] = 1;\n        blockindex[52] = 1;\n        blockindex[53] = 1;\n        blockindex[58] = 1;\n        for (let i = 43; i < 61; i++) {\n            if (blockindex[i]) {\n                // this.m_maparray[i].getComponent(\"BlockBGItem\").setBrightVisible(true, '#000000');\n            } else {\n                let node = new cc.Node(\"colorSpr\");\n                node.colorIndex = index;\n                node.colorName = data.name;\n                let sprite = node.addComponent(cc.Sprite);\n                console.log(data.name, index);\n                sprite.spriteFrame = this.m_spriteAtlas.getSpriteFrame(data.name + index);\n                node.position = cc.Vec2.ZERO;\n                node.parent = this.m_maparray[i];\n                this.m_maparray[i].isHaveFK = true;\n            }\n        }\n    },\n\n    onKeepGoing() {\n        this.m_n_luckyvideo.active = false;\n        this.showAdBanner(false);\n    },\n\n    touchEnd(event) {\n        if (this.m_gamestate == 0 && this.m_touch_boom) {\n            this.m_gamestate = 2;\n            let vec = event.touch.getLocation();\n            vec = this.m_n_gamenode.convertToNodeSpace(vec);\n            let index = this.backIndexofList(vec);\n            if (index >= 0) {\n                if (!this.m_maparray[index].isHaveFK) {\n                    this.m_maparray[index].isHaveFK = true;\n                    let node = cc.instantiate(this.m_pre_boom);\n                    node.parent = this.m_maparray[index];\n                    window.INIT_GAME_SAVE_DATA.tool[0] -= 1;\n                    this.updateToolsNum();\n                    this.doBoomAction(this.m_maparray[index].position, index);\n                }\n            }\n            this.m_n_guidemask.active = !this.m_mapblink;\n            this.m_touch_boom = !this.m_mapblink;\n            this.setMapBlink(!this.m_mapblink);\n            this.m_gamestate = 0;\n            for (let i = 0; i < this.m_n_kuai.length; i++) {\n                let shapeitem = this.m_n_kuai[i].getComponent(\"ShapeItem\");\n                if (shapeitem.checkIsLose()) {\n                    this.m_n_kuai[i].opacity = 125;\n                } else {\n                    this.m_n_kuai[i].opacity = 255;\n                }\n            }\n        }\n    },\n\n    doBoomAction(pos, index) {\n        let FKNode = this.m_maparray[index].getChildByName(\"colorSpr\")\n        //这个假方块变大并且渐隐掉\n        FKNode.runAction(cc.sequence(\n            cc.spawn(cc.scaleTo(0.5, 2), cc.fadeOut(0.5)),\n            cc.removeSelf(true)\n        ));\n        this.m_maparray[index].isHaveFK = null;\n        this.scheduleOnce(() => {\n            let node = cc.instantiate(this.m_pre_boomeffect);\n            node.parent = this.m_n_gamenode;\n            node.position = pos;\n            node.y -= 100;\n            node.zIndex = 1 << 8;\n            node.getComponent(cc.Animation).play(\"bombeffect\");\n            Utils.SetSoundEffect(window.BOOM_EFFECT, false, 1);\n        }, 0.4);\n        let list = this.getBoomIndexList(index);\n        console.log(list);\n        let count = 0;\n        let actionAry = [];\n        actionAry.push(cc.delayTime(0.4));\n        for (let i = 0; i < list.length; i++) {\n            let oneList = list[i];\n            for (let j = 0; j < oneList.length; j++) {\n                let xIndex = oneList[j];\n                if (this.m_maparray[xIndex].isHaveFK) {\n                    actionAry.push(cc.callFunc(function () {\n                        let xIndex = arguments[1][0]\n                        let count = arguments[1][1];\n                        let score = this.getAddScoreCal(count);\n                        Utils.showHurtText(\"+\" + score, this.m_n_gamenode, this.m_maparray[xIndex].x, this.m_maparray[xIndex].y, 20, null, null, null, true);\n                        this.updateScore(score)\n                    }, this, [xIndex, count]))\n\n                    actionAry.push(cc.callFunc(function () {\n                        let xIndex = arguments[1]\n                        this.m_maparray[xIndex].isHaveFK = null\n                        let FKNode = this.m_maparray[xIndex].getChildByName(\"colorSpr\")\n                        if (!FKNode) {\n                            return //防止没有这个方块的时候\n                        }\n                        this.attackMonster(FKNode.colorIndex, this.m_maparray[xIndex].x, this.m_maparray[xIndex].y);\n                        //这个假方块变大并且渐隐掉\n                        FKNode.runAction(cc.sequence(\n                            cc.spawn(cc.scaleTo(0.5, 2), cc.fadeOut(0.5)),\n                            cc.removeSelf(true)\n                        ))\n\n                    }, this, xIndex));\n                    count++\n                }\n            }\n            actionAry.push(cc.delayTime(0.3))\n        }\n\n        if (actionAry.length > 0) {\n            // Utils.SetSoundEffect(window.GET_GOLD, false, 1);\n            actionAry.push(cc.callFunc(function () {\n                this._isdeleting = false\n                this.checkIsLose()\n            }, this))\n            this._isdeleting = true\n            let action = cc.sequence(actionAry)\n            this.node.runAction(action);\n        }\n    },\n\n    /**\n     * 根据炸弹下标获取范围引爆范围\n     * @param {炸弹下标} index \n     */\n    getBoomIndexList(index) {\n        return window.boomrange[index];\n    },\n\n    bombFinish() {\n\n    },\n    /**\n     * 获取可以放置的方格 3个\n     */\n    getCanDropBlocks() {\n        let canDroplsit = [0, 0, 0];\n        for (let k = this._configlist.length - 1; k >= 1; k--) {\n            //一个个格子放试一下能不能放\n            for (var i = 0; i < this.m_maparray.length; i++) {\n                var frameNode = this.m_maparray[i]\n                var srcPos = cc.v2(frameNode.x, frameNode.y)\n                var count = 1\n                if (!frameNode.isHaveFK) {\n                    //这里做是否可以放的判断\n                    let children = this._configlist[k];\n                    for (var j = 1; j < children.length; j++) {\n                        var len = 52 //碰撞距离\n                        var childPos = srcPos.add(cc.v2(children[j].x, children[j].y))\n                        //碰撞检测\n                        for (var s = 0; s < this.m_maparray.length; s++) {\n                            var tFrameNode = this.m_maparray[s]\n                            var dis = cc.v2(tFrameNode.x, tFrameNode.y).sub(childPos).mag();\n                            if (dis <= len && !tFrameNode.isHaveFK) {\n                                count++ //可以放就要累加计数\n                            }\n                        }\n                    }\n                    //如果数量相等就说明这个方块在这个格子是可以放下的\n                    if (count == children.length) {\n                        canDroplsit.push(k);\n                        break;\n                    }\n                }\n            }\n        }\n        if (canDroplsit.length > 3) {\n            let arr = Utils.getRandomSDiff(0, canDroplsit.length - 1, 3);\n            return [canDroplsit[arr[0]], canDroplsit[arr[1]], canDroplsit[arr[2]]];\n        } else {\n            return [canDroplsit[0], canDroplsit[1], canDroplsit[2]];\n        }\n    },\n\n    backIndexofList(pos) {\n        for (let i = 0; i < window.INDEX_TO_POINT.length; i++) {\n            if (pos.sub(cc.v2(window.INDEX_TO_POINT[i][0], window.INDEX_TO_POINT[i][1])).mag() <= 50) {\n                return i;\n            }\n        }\n        return -1;\n    },\n\n    updateToolsNum() {\n        this.m_boomnum = window.INIT_GAME_SAVE_DATA.tool[0];\n        this.m_l_boomnum.string = \"x\" + this.m_boomnum;\n        this.setAddVisible(this.m_btn_tool2, this.m_boomnum);\n        this.updateGold();\n    },\n\n    updateGold() {\n        this.m_l_gold.string = window.INIT_GAME_SAVE_DATA.gold_num;\n    },\n\n    updateSkin() {\n        console.log('updateskin')\n        let data_index = 0;\n        for (let i = 0; i < this.m_n_kuai.length; i++) {\n            data_index = this.m_n_kuai[i].getComponent(\"ShapeItem\").updateIndex(true);\n        }\n        let data = window.SKIN_CONFIG[data_index];\n        for (let j = 0; j < this.m_maparray.length; j++) {\n            let FKNode = this.m_maparray[j].getChildByName(\"colorSpr\");\n            if (FKNode) {\n                FKNode.getComponent(cc.Sprite).spriteFrame = this.m_spriteAtlas.getSpriteFrame(data.name + FKNode.colorIndex);\n            }\n        }\n    },\n\n    setAddVisible(node, num) {\n        let addbtn = cc.find(\"sp_add\", node);\n        addbtn.active = num <= 0;\n    },\n\n    updateScore(score) {\n        this.m_cur_score += score;\n        this.m_l_score.string = this.m_cur_score;\n        if (!this.m_n_result_panel.active)\n            RankList.checkWillSurpass(this.m_cur_score);\n        if (this.m_cur_score > window.INIT_GAME_SAVE_DATA.top_score) {\n            window.INIT_GAME_SAVE_DATA.top_score = this.m_cur_score;\n            RankList.setScore(window.INIT_GAME_SAVE_DATA.top_score);\n        }\n    },\n\n    createMap() {\n        this.m_maparray = [];\n        let frameList = [];\n        for (let index = 0; index < window.INDEX_TO_POINT.length; index++) {\n            let node = cc.instantiate(this.m_pre_blockbg);\n            node.x = window.INDEX_TO_POINT[index][0];\n            node.y = window.INDEX_TO_POINT[index][1];\n            node.parent = this.m_n_bglist;\n            node.FKIndex = index;\n            frameList.push(node)\n        }\n        this.m_maparray = frameList;\n    },\n\n    //创建糖果\n    initMonster(level) {\n        let self = this;\n        let lv = level % 100;\n        if (lv <= 0) lv += 1;\n        let data = window.MAP_CONFIG[lv - 1];\n\n        this.m_sp_monster.node.getComponent(\"MonsterItem\").initType(data.mon_id, data.mon_hp, level);\n        // this.m_sp_monster.node.color = window.MON_COLOR[data.color];\n        this.m_sp_monster.node.active = true;\n        this.m_sp_monster.node.opacity = 255;\n        this.m_sp_monster.node.y = 300;\n        let y = 0;\n        this.m_sp_monster.node.getComponent(\"MonsterItem\").playStartTalk();\n        if (data.mon_id == 0) {\n            // this.m_sp_monster.node.y = -10;\n            y = -10;\n        } else {\n            // this.m_sp_monster.node.y = 0;\n        }\n\n        this.m_sp_monster.node.runAction(cc.moveTo(0.4, 0, y).easing(cc.easeIn(3.0)));\n\n        if (level % 5 == 0) {\n            this.m_n_boss.active = true;\n            this.m_n_boss.opacity = 50;\n            this.m_n_boss.scale = 2.5;\n            let offset = 10;\n            let deltaTime = 0.02;\n            this.m_n_boss.runAction(cc.sequence(cc.spawn(cc.scaleTo(0.8, 1.0).easing(cc.easeBackIn(3.0)), cc.fadeTo(0.8, 255)), cc.moveBy(deltaTime, cc.v2(offset * 2, 0)),\n                cc.moveBy(deltaTime * 2, cc.v2(-offset * 4)),\n                cc.moveBy(deltaTime, cc.v2(offset * 2)),\n\n                cc.moveBy(deltaTime, cc.v2(0, offset * 2)),\n                cc.moveBy(deltaTime * 2, cc.v2(0, -offset * 4)),\n                cc.moveBy(deltaTime, cc.v2(0, offset * 2)),\n\n                cc.moveBy(deltaTime, cc.v2(offset, 0)),\n                cc.moveBy(deltaTime * 2, cc.v2(-offset * 2, 0)),\n                cc.moveBy(deltaTime, cc.v2(offset, 0)),\n\n                cc.moveBy(deltaTime, cc.v2(0, offset)),\n                cc.moveBy(deltaTime * 2, cc.v2(0, -offset * 2)),\n                cc.moveBy(deltaTime, cc.v2(0, offset)),\n                cc.fadeOut(1.5)));\n        }\n    },\n\n\n    //加分，参数是消除的总数,isDropAdd是是否是放下的单纯加分\n    addScore: function (XCCount, isDropAdd) {\n        let addScoreCount = this.getAddScoreCal(XCCount, isDropAdd)\n        Utils.showHurtText(\"+\" + addScoreCount, null, 0, 0, 30);\n        this.updateScore(addScoreCount);\n    },\n\n    //计算加分的公式\n    getAddScoreCal: function (XCCount, isDropAdd) {\n        let x = XCCount + 1\n        let addScoreCount = isDropAdd ? x : x * x //数量的平方\n        return addScoreCount * this.m_doublescore;\n    },\n\n    //检测是不是输了\n    checkIsLose: function () {\n        //如果正在消除中，那就不判断输赢，因为消除后会再判断\n        if (this._isdeleting) return\n        this.m_normal_curtime = 0;\n        let count = 0\n        for (let i = 0; i < 3; i++) {\n            let node = cc.find('n_kuai' + (i + 1), this.m_n_gamenode)\n            let script = node.getComponent('ShapeItem');\n            if (script.checkIsLose()) {\n                count++\n                node.opacity = 125\n            } else {\n                node.opacity = 255\n            }\n        }\n        if (count >= 2 && !this._isbless) {\n            this._isbless = true;\n            for (let i = 0; i < 3; i++) {\n                let node = cc.find('n_kuai' + (i + 1), this.m_n_gamenode)\n                node.getComponent('ShapeItem').setNextBlock(0); //设置下一个必定是某个形状\n            }\n        }\n        if (count == 3) { //没地方放了\n            this.judgeGame(false);\n        }\n    },\n\n    //检查是否有可消除\n    checkClearUp() {\n        let haveFKIndexList = []\n        for (let i = 0; i < this.m_maparray.length; i++) {\n            if (this.m_maparray[i].isHaveFK) {\n                haveFKIndexList.push(this.m_maparray[i].FKIndex)\n            }\n        }\n        haveFKIndexList.sort(function (a, b) {\n            return a - b\n        });\n        let xcList = [] //要消除的方块列表\n        for (let i = 0; i < window.DISLIST.length; i++) {\n            let oneXCList = window.DISLIST[i]\n            let intersectAry = this.get2AryIntersect(haveFKIndexList, oneXCList) //求数组交集\n            if (intersectAry.length > 0) {\n                let isXC = this.check2AryIsEqual(oneXCList, intersectAry) //数组相同，消除\n                if (isXC) {\n                    xcList.push(oneXCList)\n                }\n            }\n        }\n        let actionAry = [];\n        //消除\n        let count = 0;\n        let clearnum = 0;\n        for (let i = 0; i < xcList.length; i++) {\n            let oneList = xcList[i];\n            clearnum += oneList.length;\n            for (let j = 0; j < oneList.length; j++) {\n                let xIndex = oneList[j]\n                actionAry.push(cc.callFunc(function () {\n                    let xIndex = arguments[1][0]\n                    let count = arguments[1][1];\n                    let score = this.getAddScoreCal(count);\n                    // Utils.showTipsText(\"+\" + score, this.m_n_gamenode, this.m_maparray[xIndex].x, this.m_maparray[xIndex].y, 60);\n                    Utils.showHurtText(\"+\" + score, this.m_n_gamenode, this.m_maparray[xIndex].x, this.m_maparray[xIndex].y, 20, null, null, null, true);\n                    this.updateScore(score)\n                }, this, [xIndex, count]))\n\n                actionAry.push(cc.callFunc(function () {\n                    let xIndex = arguments[1]\n                    this.m_maparray[xIndex].isHaveFK = null\n                    let FKNode = this.m_maparray[xIndex].getChildByName(\"colorSpr\")\n                    if (!FKNode) {\n                        return //防止没有这个方块的时候\n                    }\n                    this.attackMonster(FKNode.colorIndex, this.m_maparray[xIndex].x, this.m_maparray[xIndex].y);\n                    //这个假方块变大并且渐隐掉\n                    FKNode.runAction(cc.sequence(\n                        cc.spawn(cc.scaleTo(0.5, 2), cc.fadeOut(0.5)),\n                        cc.removeSelf(true)\n                    ))\n\n                }, this, xIndex))\n\n                actionAry.push(cc.delayTime(0.1))\n                count++\n            }\n        }\n\n        if (actionAry.length > 0) {\n            Utils.SetSoundEffect(window.GET_GOLD, false, 1);\n            actionAry.push(cc.callFunc(function () {\n                this._isdeleting = false\n                this.checkIsLose()\n            }, this))\n            this.handlerShowTime(clearnum);\n            this._isdeleting = true\n            let action = cc.sequence(actionAry)\n            this.node.runAction(action);\n        }\n    },\n\n    //获得两个数组的交集\n    get2AryIntersect: function (ary1, ary2) {\n        let intersectAry = []\n        for (let i = 0; i < ary1.length; i++) {\n            for (let j = 0; j < ary2.length; j++) {\n                if (ary2[j] == ary1[i]) {\n                    intersectAry.push(ary2[j])\n                }\n            }\n        }\n        return intersectAry\n    },\n\n\n    /**\n     * 获得两个数组的交集\n     * @param  {array}数组1\n     * @param  {array}数组2\n     * @return {boolean}是否相交\n     */\n    check2AryIsEqual: function (ary1, ary2) {\n        for (let i = 0; i < ary1.length; i++) {\n            if (ary2[i] != ary1[i]) {\n                return false\n            }\n        }\n        return true\n    },\n\n    handlerShowTime(num) {\n        console.log(\"handlerShowTime\", num);\n        let index = -1;\n        if (num > 9 && num <= 12) {\n            index = 0;\n        } else if (num > 12 && num <= 15) {\n            index = 1;\n        } else if (num > 15) {\n            index = 2;\n        }\n        if (index >= 0) {\n            if (index == 2) {\n                Utils.SetSoundEffect(window.SAY_3, false, 1);\n            } else {\n                Utils.SetSoundEffect(window.GET_GOLD, false, 1);\n            }\n            this.m_n_showtime[index].active = true;\n            this.m_n_showtime[index].getComponent(cc.Animation).play();\n            setTimeout(() => {\n                this.m_n_showtime[index].active = false;\n            }, 1500);\n        }\n    },\n\n    //增加金币数\n    addGold(gold, spos, epos) {\n        let this$1 = this;\n        let spritefram = this.m_spf_gold;\n        window.INIT_GAME_SAVE_DATA.gold_num += gold;\n        for (let i = 0; i < gold; i++) {\n            Utils.moveIcon(spritefram, this.m_n_gamenode, spos, epos, () => {\n                Utils.SetSoundEffect(window.GET_GOLD, false, 0.4);\n                this$1.m_l_gold.string = window.INIT_GAME_SAVE_DATA.gold_num;\n            }, 0.5, 60 * (i + 1));\n        }\n        // })\n    },\n\n    //展示宝箱\n    showBox(spos, epos, lv) {\n        let this$1 = this;\n        let callback = function () {\n            if (lv % 10 == 0 && lv <= 370) {\n                this$1.m_n_stepview.scale = 0;\n                this$1.m_n_stepview.active = true;\n                this$1.m_n_stepview.runAction(cc.sequence(cc.scaleTo(0.2, 1.2, 1.2).easing(cc.easeIn(3.0)), cc.scaleTo(0.1, 1, 1)));\n                this$1.m_n_stepview.getComponent(\"StepViewItem\").showStep(lv);\n            }\n        }\n        Utils.loadRes('sprite/getshare_box', cc.SpriteFrame, (obj) => {\n            Utils.moveIcon(obj, this$1.m_n_gamenode, spos, epos, () => {\n                this$1.m_n_sharegift.active = true;\n                this$1.m_n_sharegift.getComponent('GetBoxGiftItem').showView(callback);\n            }, 0.8, 100);\n        })\n    },\n\n    attackMonster(hurt, x, y) {\n        let self = this;\n        let realhurt = hurt ? 2 * hurt : 2;\n        let blocknode = this.m_block_pool.get();\n        if (!blocknode) {\n            blocknode = cc.instantiate(this.m_pre_rock);\n        }\n        let angle = Utils.getAngle(this.m_sp_monster.node.parent.x, this.m_sp_monster.node.parent.y, x, y);\n        if (this.m_sp_monster.node.parent.x <= x) {\n            angle = -angle;\n        }\n        blocknode.rotation = angle;\n        blocknode.getComponent(\"RockItem\").resetSytem();\n        blocknode.zIndex = 1 << 5;\n        blocknode.parent = this.m_n_gamenode;\n        blocknode.x = x;\n        blocknode.y = y;\n        blocknode.runAction(cc.sequence(cc.callFunc(() => {\n        }), cc.moveTo(1.0, cc.v2(this.m_sp_monster.node.parent.x, this.m_sp_monster.node.parent.y)).easing(cc.easeIn(2.0)), cc.callFunc(() => {\n            self.m_block_pool.put(blocknode);\n            blocknode = null;\n            self.monsterbeHit(realhurt);\n        })));\n    },\n\n    destroyBlockByHitMonster() {\n        let self = this;\n        let arr = [];\n        let len = 4;\n        for (let i = 0; i < this.m_maparray.length; i++) {\n            if (this.m_maparray[i].isHaveFK) {\n                arr.push(i);\n                len--;\n                if (len <= 0) break;\n            }\n        }\n        for (let i = 0; i < arr.length; i++) {\n            let blocknode = this.m_light_pool.get();\n            if (!blocknode) {\n                blocknode = cc.instantiate(this.m_pre_light);\n            }\n            let pos = this.m_maparray[arr[i]].position;\n            blocknode.parent = this.m_n_gamenode;\n            blocknode.position = cc.v2(this.m_sp_monster.node.parent.x, this.m_sp_monster.node.parent.y);\n            blocknode.runAction(cc.sequence(cc.callFunc(() => {\n                Utils.SetSoundEffect(window.GET_GOLD, false, 1);\n            }), cc.moveTo(0.8, pos).easing(cc.easeIn(2.0)), cc.callFunc(() => {\n                self.m_light_pool.put(blocknode);\n                blocknode = null;\n                self.blockBeHit(arr[i]);\n            })));\n        }\n    },\n\n    blockBeHit(index) {\n        this.m_maparray[index].isHaveFK = null;\n        for (let i = 0; i < this.m_n_kuai.length; i++) {\n            let shapeitem = this.m_n_kuai[i].getComponent(\"ShapeItem\");\n            if (shapeitem.checkIsLose()) {\n                this.m_n_kuai[i].opacity = 125;\n            } else {\n                this.m_n_kuai[i].opacity = 255;\n            }\n        }\n        let FKNode = this.m_maparray[index].getChildByName(\"colorSpr\")\n        if (!FKNode) {\n            return //防止没有这个方块的时候\n        }\n        FKNode.runAction(cc.sequence(\n            cc.spawn(cc.scaleTo(0.5, 2), cc.fadeOut(0.5)),\n            cc.removeSelf(true)\n        ));\n    },\n\n    monsterbeHit(hurt) {\n        Utils.SetSoundEffect(window.BE_HIT, false, 0.3);\n        Utils.showHurtText('-' + hurt, this.m_sp_monster.node.parent, 0, 100, 30, new cc.Color(230, 71, 21), 0.8);\n        this.updateScore(hurt);\n        let hp = this.m_sp_monster.node.getComponent(\"MonsterItem\").reduceHp(hurt);\n        if (hp <= 0) {\n            this.m_normal_curtime = -1;\n            this.judgeGame(true);\n        } else {\n            this.m_normal_curtime = 0;\n            if (this.m_solidernum <= 0 && this.m_cur_attack_num <= 0) {\n                this.judgeGame(false);\n            } else if (this.m_cur_attack_num <= 0 && hp <= 20) {\n                this.m_sp_monster.node.getComponent(\"MonsterItem\").playAngry();\n            } else {\n                this.m_sp_monster.node.getComponent(\"MonsterItem\").playBeHit();\n            }\n        }\n    },\n\n    onOpenSkinPanel() {\n        this.m_n_skinpanel.active = true;\n    },\n\n\n\n    onCancelVideo() {\n        this.m_n_lookvideo.active = false;\n        if (this._relivenum <= 0) {\n            this.m_n_reliveview.active = true;\n            this.m_n_reliveview.scale = 0;\n            this.m_n_reliveview.runAction(cc.sequence(cc.scaleTo(0.2, 1.2, 1.2).easing(cc.easeIn(3.0)), cc.scaleTo(0.1, 1, 1)));\n            if (window.SKIN_SHARE) {\n                this.showAdBanner(false);\n                let node = cc.find(\"btn_close\", this.m_n_reliveview);\n                node.y = -585;\n                this.scheduleOnce(() => {\n                    node.y = -514;\n                    if (!this.showAdb)\n                        this.showAdBanner(true);\n                }, 1.3)\n            } else {\n                this.showAdBanner(true);\n            }\n        }\n        else {\n            this.m_n_displaycheck.active = false;\n            this.m_n_displayrank.active = true;\n            console.log(\"this._relivenum++\", this._relivenum);\n            this.m_n_result_panel.getComponent(\"GameResult\").showFail(this._relivenum, this.m_cur_score, this._killnum);\n            this.showAdBanner(true);\n            RankList.setScore(window.INIT_GAME_SAVE_DATA.top_score);\n            Utils.SetSoundEffect(window.CHALLENG_FAIL_MUSIC, false, 1);\n        }\n        this._relivenum++;\n    },\n\n    onAdBtnClick(event, custom) {\n        if (typeof (wx) != 'undefined') {\n            if (!window.firstvideo && custom == 3) {\n                // window.CHANGE_BLOCK = 1;\n                // cc.sys.localStorage.setItem('change', '1');\n                window.firstvideo = true;\n                this.videoReward(1);\n                return;\n            }\n            let VersionToast = () => {\n                wx.showToast({\n                    title: \"微信版本过低，无法看广告\",\n                    icon: \"none\",\n                    image: \"\",\n                    duration: 0,\n                });\n                setTimeout(() => wx.hideToast(), 2000);\n            };\n            let info = wx.getSystemInfoSync();\n            if (info.SDKVersion >= '2.0.4') {\n                this.showAd(custom);\n            } else {\n                VersionToast();\n            }\n        } else {\n            console.log('it is not wechat');\n            this.videoReward(custom);\n        }\n    },\n\n    showAd(custom) {\n        let self = this;\n        if (!this.m_videoAd) {\n            this.m_videoAd = wx.createRewardedVideoAd({\n                adUnitId: 'adunit-e573e466be94d7f5'\n            });\n        }\n        this.m_videoAd.onError(err => {\n            // Utils.showTipsText(\"error:\" + err.errMsg);\n        });\n\n        this.m_videoAd.load()\n            .then(() => {\n                self.m_videoAd.show();\n                self.showAdb = true;\n                self.m_videoAd.onClose((status) => {\n                    self.m_videoAd.offClose();\n                    self.showAdb = false;\n                    self.showAdBanner(false);\n                    if (status && status.isEnded || status === undefined) {\n                        self.videoReward(custom);\n                    } else {\n\n                    }\n                });\n            })\n            .catch(err => Utils.showTipsText(\"拉去视频广告失败，请稍候重试\", null, null, null, 60, cc.Color.BLACK, 1.2));\n    },\n\n    videoReward(custom) {\n        if (custom == 1 || custom == 3) {\n            let list = this.getCanDropBlocks();\n            // console.log('list=',list);\n            for (let i = 0; i < this.m_n_kuai.length; i++) {\n                let shapeitem = this.m_n_kuai[i].getComponent(\"ShapeItem\");\n                this.m_n_kuai[i].opacity = 255;\n                shapeitem.resetBlock(list[i] || 0);\n            }\n            this.m_in_judge = false;\n            this.m_n_lookvideo.active = false;\n        } else if (custom == 2) {\n            this.m_doublescore = 2;\n            this.m_n_doublescore.active = true;\n            Utils.showTipsText(\"得分双倍\", null, 0, 0, 60);\n            this.m_n_luckyvideo.active = false;\n        }\n    },\n\n    judgeGame(boo) {\n        if (this.m_in_judge) return;\n        this.m_in_judge = true;\n\n        if (boo) { //胜利\n            console.log('胜利');\n            this._killnum++;\n            let time = this.m_sp_monster.node.getComponent(\"MonsterItem\").playDead();\n            Utils.SetSoundEffect(window.CHALLENG_VICTORY_MUSIC, false, 1);\n            let gold = 3;\n            let pos = this.m_sp_monster.node.parent.position;\n            if (this.m_cur_level % 5 == 0) {\n                this.showBox(cc.v2(pos.x, pos.y - 100), cc.Vec2.ZERO, this.m_cur_level);\n            } else {\n                this.addGold(gold, cc.v2(pos.x, pos.y - 10), this.m_l_gold.node.position)\n            }\n\n            window.INIT_GAME_SAVE_DATA.top_level += 1;\n            let self = this;\n            this.scheduleOnce(() => {\n                self.onNextLevel();\n            }, time / 1000)\n            this.destroyBlockByHitMonster();\n            RankList.setScore(window.INIT_GAME_SAVE_DATA.top_score);\n        } else {\n            if (this._videonum <= 0) {\n                console.log('失败');\n                this.m_sp_monster.node.getComponent(\"MonsterItem\").playMonsterVictory();\n                this.m_n_lookvideo.active = true;\n                this.m_n_lookvideo.scale = 0;\n                this.m_n_lookvideo.runAction(cc.sequence(cc.scaleTo(0.2, 1.2, 1.2).easing(cc.easeIn(3.0)), cc.scaleTo(0.1, 1, 1)));\n                if (window.firstvideo) {\n                    this.m_l_asktype.string = \"看视频换一批\";\n                } else {\n                    this.m_l_asktype.string = \"免费换一批\";\n                    // window.firstvideo = true;\n                }\n                this._videonum++;\n            } else {\n                this.onCancelVideo();\n            }\n        }\n    },\n\n    /**\n     * @description 宝箱奖励获取处理\n     * @author 吴建奋\n     * @param {Number} type\n     */\n    BoxReward(type) {\n        if (type == 0) {\n            this.updateToolsNum();\n        } else {\n            this.updateGold();\n        }\n    },\n\n    onVideoClose() {\n        this.m_n_reliveview.active = false;\n        this.m_n_displaycheck.active = false;\n        this.m_n_displayrank.active = true;\n        this.m_n_result_panel.getComponent(\"GameResult\").showFail(this._relivenum, this.m_cur_score, this._killnum);\n        this.showAdBanner(true);\n        RankList.setScore(window.INIT_GAME_SAVE_DATA.top_score);\n        Utils.SetSoundEffect(window.CHALLENG_FAIL_MUSIC, false, 1);\n    },\n\n    onReliveBtnClick() {\n        if (typeof (wx) != 'undefined') {\n            let VersionToast = () => {\n                wx.showToast({\n                    title: \"微信版本过低，无法看广告\",\n                    icon: \"none\",\n                    image: \"\",\n                    duration: 0,\n                });\n                setTimeout(() => wx.hideToast(), 2000);\n            };\n            let info = wx.getSystemInfoSync();\n            if (info.SDKVersion >= '2.0.4') {\n                this.showReliveAd();\n            } else {\n                VersionToast();\n            }\n        } else {\n            console.log('it is not wechat');\n            this.onReliveGameVideo();\n        }\n    },\n\n    showReliveAd() {\n        let self = this;\n        if (!this.m_videoAd2) {\n            this.m_videoAd2 = wx.createRewardedVideoAd({\n                adUnitId: 'adunit-5187ffc3ab571318'\n            });\n        }\n        this.m_videoAd2.onError(err => {\n            // Utils.showTipsText(\"error:\" + err.errMsg);\n        });\n\n        this.m_videoAd2.load()\n            .then(() => {\n                self.m_videoAd2.show();\n                self.showAdBanner(false);\n                self.m_videoAd2.onClose((status) => {\n                    self.m_videoAd2.offClose();\n                    if (status && status.isEnded || status === undefined) {\n                        self.onReliveGameVideo();\n                    } else {\n\n                    }\n                });\n            })\n            .catch(err => Utils.showTipsText(\"视频拉取失败，请稍后重试\", null, null, null, 60, cc.Color.BLACK, 1.2));\n    },\n\n    onNextLevel() {\n        this.m_n_result_panel.active = false;\n        this.showAdBanner(false);\n        this.m_cur_level = window.INIT_GAME_SAVE_DATA.top_level + 1;\n        console.log(\"this.m_cur\", this.m_cur_level);\n        this.m_in_judge = false;\n        this.m_l_level.string = \"LV.\" + this.m_cur_level;\n        this.initMonster(this.m_cur_level);\n        this.checkIsLose();\n    },\n\n    onBackToMenu() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        cc.director.loadScene(window.MENU_SCENE_NAME);\n    },\n\n    onBoomClick(event) {\n        // this.judgeGame(false);\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        if (this.m_gamestate == 0 && !this._isdeleting) {\n            if (this.m_boomnum <= 0) {\n                this.m_n_tooluse.active = true;\n                this.m_n_tooluse.getComponent(\"UseToolItem\").initToolInfo(0, this.m_boomnum, this.m_spriteAtlas.getSpriteFrame(window.TOOL_CONFIG[0].name));\n            } else {\n                this.m_n_guidemask.active = !this.m_mapblink;\n                this.m_touch_boom = !this.m_mapblink;\n                this.setMapBlink(!this.m_mapblink);\n            }\n        }\n    },\n\n    onStrongClick(event) {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        if (this.m_gamestate == 0) {\n            this.m_n_tooluse.active = true;\n            this.m_n_tooluse.getComponent(\"UseToolItem\").initToolInfo(1, this.m_strongnum, this.m_spriteAtlas.getSpriteFrame(window.TOOL_CONFIG[1].name));\n            this.guideMaskClick();\n        }\n    },\n\n    onUseStrong() {\n        let t = false;\n        for (let i = 0; i < this.m_row; i++) {\n            for (let j = 0; j < this.m_col; j++) {\n                if (this.m_grid_array[i][j].type == 1) {\n                    let a = this.m_grid_array[i][j].obj.getComponent(\"BlockItem\").addStrong();\n                    if (a) {\n                        t = true;\n                    }\n                }\n            }\n        }\n        if (t) {\n            window.INIT_GAME_SAVE_DATA.tool[1] -= 1;\n            this.updateToolsNum();\n        }\n    },\n\n    //设置背景闪烁\n    setMapBlink(boo) {\n        if (boo === this.m_mapblink) {\n            return;\n        }\n\n        this.m_mapblink = boo;\n        if (boo) {\n            for (let i = 0; i < this.m_maparray.length; i++) {\n                if (!this.m_maparray[i].isHaveFK) {\n                    let action = cc.repeatForever(cc.sequence(cc.scaleTo(0.8, 0.8, 0.8), cc.scaleTo(0.8, 1, 1)));\n                    action.setTag(1);\n                    this.m_maparray[i].runAction(action);\n                }\n            }\n        } else {\n            for (let i = 0; i < this.m_maparray.length; i++) {\n                if (!this.m_maparray[i].isHaveFK) {\n                    this.m_maparray[i].stopActionByTag(1);\n                    this.m_maparray[i].scale = 1;\n                }\n            }\n        }\n    },\n\n    getTargetGridInfo(target) {\n        let i = Math.floor(target / this.m_row);\n        let j = target % this.m_col;\n        return this.m_maparray[i][j];\n    },\n\n    onReliveGameVideo() {\n        Utils.showTipsText(\"复活成功\");\n        this.m_in_judge = false;\n        for (let i = 0; i < this.m_n_kuai.length; i++) {\n            this.m_n_kuai[i].getComponent(\"ShapeItem\").resetBlock();\n            this.m_n_kuai[i].opacity = 255;\n        }\n        this.m_sp_monster.node.getComponent(\"MonsterItem\").playAngry();\n        this.m_n_result_panel.active = false;\n        this.m_n_reliveview.active = false;\n        this.m_maparray.forEach(element => {\n            element.getChildByName(\"colorSpr\")\n        });\n        for (let index = 0; index < this.m_maparray.length; index++) {\n            let FKNode = this.m_maparray[index].getChildByName(\"colorSpr\")\n            //这个假方块变大并且渐隐掉\n            if (FKNode) {\n                FKNode.runAction(cc.sequence(\n                    cc.spawn(cc.scaleTo(0.5, 2), cc.fadeOut(0.5)),\n                    cc.removeSelf(true)\n                ));\n            }\n            this.m_maparray[index].isHaveFK = null;\n        }\n\n        RankList.checkWillSurpass(this.m_cur_score);\n        this.m_n_displaycheck.active = true;\n        this.m_n_displayrank.active = false;\n        this.m_gamestate = 0;\n    },\n\n    onReliveGame() {\n        Utils.SetSoundEffect(window.BUTTON_CLICK_MUSIC, false, 1);\n        if (window.INIT_GAME_SAVE_DATA.gold_num >= 20) {\n            Utils.showTipsText(\"复活成功\");\n            this.m_in_judge = false;\n            window.INIT_GAME_SAVE_DATA.gold_num -= 20;\n            this.updateGold();\n            for (let i = 0; i < this.m_n_kuai.length; i++) {\n                this.m_n_kuai[i].getComponent(\"ShapeItem\").resetBlock(0);\n                this.m_n_kuai[i].opacity = 255;\n            }\n            this.m_sp_monster.node.getComponent(\"MonsterItem\").playAngry();\n            this.m_n_result_panel.active = false;\n            RankList.checkWillSurpass(this.m_cur_score);\n            this.m_n_displaycheck.active = true;\n            this.m_n_displayrank.active = false;\n            this.m_gamestate = 0;\n        } else {\n            // Utils.showTipsText(\"金币不足\")\n            ShareSdk.shareAppMessage({\n                title: \"来帮帮我，我被怪兽消灭了\",\n                imageUrl: window.tempFileURL[1],\n                success: res => {\n\n                },\n                fail: err => {\n\n                },\n                complate: msg => {\n\n                },\n            });\n        }\n    },\n\n    showAdBanner(boo) {\n        if (typeof (wx) == 'undefined') return;\n        let Size = cc.winSize\n\n        let Widthnode = cc.find(\"Canvas/n_funnymap/n_bannerpos\");\n        var pos = this.node.convertToWorldSpace(Widthnode);\n\n        if (Size.height / Size.width > 2) {//适配全面屏 适用于FIXHeight\n            pos.y += (Size.height - 1920) / 2;\n        }\n\n        let system = wx.getSystemInfoSync();\n\n        let adaptScaleH = system.screenHeight / Size.height;\n        var PosY = ((Size.height - pos.y) * adaptScaleH);\n\n        let self = this;\n        if (this.m_bannerad) {\n            this.m_bannerad.destroy();\n            this.m_bannerad = null;\n        }\n        if (!this.m_bannerad && boo) {\n            if (system.SDKVersion < '2.0.4') {\n                wx.showToast({\n                    title: \"微信版本过低，无法创建广告banner\",\n                    icon: \"none\",\n                    image: \"\",\n                    duration: 0,\n                });\n                setTimeout(() => wx.hideToast(), 3000);\n            } else {\n                self.m_bannerad = wx.createBannerAd({\n                    adUnitId: 'adunit-9dd057b6b514245a',\n                    style: {\n                        left: 0,\n                        top: PosY,\n                        width: system.screenWidth,\n                    }\n                })\n                self.m_bannerad.onResize((res1) => {\n                    try {\n                        if (self.m_bannerad && self.m_bannerad.style) {\n\n                            self.m_bannerad.style.top = PosY;\n                            self.m_bannerad.style.height = res1.height;\n                        }\n                    } catch (error) {\n                        console.log(\"onResize-error\", error);\n                    }\n                });\n                self.m_bannerad.onLoad(() => {\n                    // console.log('banner 广告加载成功')\n\n                })\n                self.m_bannerad.show().then(() => {\n                    // console.log(\"广告显示成功\");\n                }).catch((err) => {\n                    // console.error(\"广告加载失败\", err);\n                })\n                self.m_bannerad.onError(err => {\n                    // console.error(err)\n                })\n\n            }\n        }\n    },\n\n    onOpenAskPanel() {\n        this.m_n_askpanel.active = true;\n    },\n\n    onCloseAskPanel() {\n        this.m_n_askpanel.active = false;\n    },\n\n    update(dt) {\n        if (this.m_normal_curtime != -1) {\n            this.m_normal_curtime += dt;\n            if (this.m_normal_curtime >= this.m_normal_talktime && this.m_gamestate == 0) {\n                this.m_normal_curtime = 0;\n                this.m_sp_monster.node.getComponent(\"MonsterItem\").playNormal();\n            }\n        }\n    },\n});"]}